#include "../../../includes/interface/Textbox.h"

//& Resources
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: TextBox(const Vector2f, const string)
//* @def: Constructor

TextBox::TextBox(const String text, const unsigned int size, const String font)
    : mVisible(true)
{
    //? @note: initialize font
    if (!mFont.loadFromFile(font))
        exit(1);

    //? @note: initialize text
    mText.setFont(mFont);
    mText.setString(text);

    mText.setCharacterSize(size);
    mText.setPosition(Vector2f{static_cast<float>(DISPLAY.width) / 2.f, static_cast<float>(DISPLAY.height) / 2.f});
    mText.setOrigin(mText.getLocalBounds().width / 2.f, mText.getLocalBounds().height / 1.5f);

    mText.setFillColor(Black);
    mText.setOutlineColor(Transparent);
    mText.setOutlineThickness(.4f);

    //? @note: initialize rectangle
    mRectangle.setSize(Vector2f{static_cast<float>(mText.getString().getSize() * mText.getCharacterSize()) * 1.5f, static_cast<float>(mText.getCharacterSize() * 1.75f)});
    mRectangle.setOrigin(Vector2f{mRectangle.getSize().x / 2.f, mRectangle.getSize().y / 2.f});
    mRectangle.setPosition(Vector2f{static_cast<float>(DISPLAY.width) / 2.f, static_cast<float>(DISPLAY.height) / 2.f});

    mRectangle.setFillColor(DarkGray);
    mRectangle.setOutlineColor(Transparent);
    mRectangle.setOutlineThickness(3.f);
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: TextBox(const TextBox&)
//* @def: Copy Constructor

TextBox::TextBox(const TextBox &textbox)
    : mRectangle(textbox.mRectangle), mFont(textbox.mFont), mText(textbox.mText), mVisible(textbox.mVisible)
{
    return;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: ~TextBox(void)
//* @def: Destructor

TextBox::~TextBox(void)
{
    return;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//& Public Functions
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: move(const Vector2f)
//* @def: moves textbox

void TextBox::move(const Vector2f offset)
{
    //? @note: move all components of textbox
    mText.move(offset);
    mRectangle.move(offset);

    return;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: resize(const unsigned int)
//* @def: resizes textbox

void TextBox::resize(const unsigned int size)
{
    //? @note: resize & reset origin of our text
    mText.setCharacterSize(size);
    mText.setOrigin(mText.getLocalBounds().width / 2.f, mText.getLocalBounds().height / 1.25f);

    //? @note: resize & reset origin of our rectangle
    mRectangle.setSize(Vector2f{static_cast<float>(mText.getString().getSize() * mText.getCharacterSize()) * 1.5f, static_cast<float>(mText.getCharacterSize() * 1.75f)});
    mRectangle.setOrigin(Vector2f{mRectangle.getSize().x / 2.f, mRectangle.getSize().y / 2.f});

    return;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: contains(const Vector2f)
//* @def: returns true if mousePos is within textbox, false otherwise

bool TextBox::contains(const Vector2f mousePos)
{
    if (mRectangle.getGlobalBounds().contains(mousePos) && mVisible)
        return true;

    return false;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//& Mutators
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: setText(const String)
//* @def: sets text

void TextBox::setText(const String text)
{
    mText.setString(text);
    resize(mText.getCharacterSize());

    return;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: setVisible(void)
//* @def: sets textbox visible

void TextBox::setVisible(void)
{
    mVisible = true;
    return;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: setHidden(void)
//* @def: sets textbox hidden

void TextBox::setHidden(void)
{
    mVisible = false;
    return;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: setFillColor(const Color)
//* @def: sets rectangle color

void TextBox::setColor(const Color color)
{
    mRectangle.setFillColor(color);
    return;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: setOutlineColor(const color)
//* @def: sets rectangle outline color

void TextBox::setOutlineColor(const Color color)
{
    mRectangle.setOutlineColor(color);
    return;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: setTextColor(const color)
//* @def: sets text color

void TextBox::setTextColor(const Color color)
{
    mText.setFillColor(color);
    return;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: setTextOutlineColor(const Color)
//* @def: sets text outline color

void TextBox::setTextOutlineColor(const Color color)
{
    mText.setOutlineColor(color);
    return;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//& Accessors
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: isVisible(void)
//* @def:

const bool TextBox::isVisible(void) const
{
    return mVisible;
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: getColor(void)
//* @def:

const Color TextBox::getColor(void) const
{
    return mRectangle.getFillColor();
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: getOutlineColor(void)
//* @def:

const Color TextBox::getOutlineColor(void) const
{
    return mRectangle.getOutlineColor();
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: getOutlineThickness(void)
//* @def:

const float TextBox::getOutlineThickness(void) const
{
    return mRectangle.getOutlineThickness();
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: getTextColor(void)
//* @def:

const Color TextBox::getTextColor(void) const
{
    return mText.getFillColor();
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: getTextOutlineColor(void)
//* @def:

const Color TextBox::getTextOutlineColor(void) const
{
    return mText.getOutlineColor();
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//* @public: getTextOutlineThickness(void)
//* @def:

const float TextBox::getTextOutlineThickness(void) const
{
    return mText.getOutlineThickness();
}
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
